{% extends 'base.html' %} {% block content %}
<div class="container mt-4">
Â  <div class="card shadow rounded mb-4">
Â  Â  <div
Â  Â  Â  class="card-header bg-primary text-white d-flex justify-content-between align-items-center"
Â  Â  >
Â  Â  Â  <h3 class="mb-0">Tenant Details</h3>
Â  Â  Â  {% if edit_mode %}
Â  Â  Â  <form
Â  Â  Â  Â  method="POST"
Â  Â  Â  Â  action="{% url 'record' record.pk %}"
Â  Â  Â  Â  class="d-inline"
Â  Â  Â  >
Â  Â  Â  Â  {% csrf_token %}
Â  Â  Â  Â  <button type="submit" name="cancel_edit" class="btn btn-secondary btn-sm">Cancel</button>
Â  Â  Â  </form>
Â  Â  Â  {% else %}
Â  Â  Â  <form
Â  Â  Â  Â  method="POST"
Â  Â  Â  Â  action="{% url 'record' record.pk %}"
Â  Â  Â  Â  class="d-inline"
Â  Â  Â  >
Â  Â  Â  Â  {% csrf_token %}
Â  Â  Â  Â  <input type="hidden" name="edit_mode" value="true" />
Â  Â  Â  Â  <button type="submit" class="btn btn-primary btn-sm">Edit</button>
Â  Â  Â  </form>
Â  Â  Â  {% endif %}
Â  Â  </div>

Â  Â  <div class="card-body">
Â  Â  Â  {% if edit_mode %}
Â  Â  Â  <form method="POST" enctype="multipart/form-data">
Â  Â  Â  Â  {% csrf_token %} {{ form.non_field_errors }}

Â  Â  Â  Â  <table class="table table-striped table-hover">
Â  Â  Â  Â  Â  <tbody>
Â  Â  Â  Â  Â  Â  {% for field in form %}
Â  Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  Â  <th style="width: 25%">{{ field.label_tag }}</th>
Â  Â  Â  Â  Â  Â  Â  <td>{{ field.errors }} {{ field }}</td>
Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  {% endfor %}
Â  Â  Â  Â  Â  </tbody>
Â  Â  Â  Â  </table>

Â  Â  Â  Â  <button type="submit" name="save_details" class="btn btn-success">
Â  Â  Â  Â  Â  Save
Â  Â  Â  Â  </button>
Â  Â  Â  </form>
Â  Â  Â  {% else %}
Â  Â  Â  <table class="table table-striped table-hover">
Â  Â  Â  Â  <tbody>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th style="width: 25%">Name</th>
Â  Â  Â  Â  Â  Â  <td>{{ record.first_name }} {{ record.last_name }}</td>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th>Phone</th>
Â  Â  Â  Â  Â  Â  <td>{{ record.phone }}</td>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th>Email</th>
Â  Â  Â  Â  Â  Â  <td>{{ record.email }}</td>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th>Address</th>
Â  Â  Â  Â  Â  Â  <td>{{ record.address }}</td>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th>Postcode</th>
Â  Â  Â  Â  Â  Â  <td>{{ record.postcode }}</td>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th>Next of Kin</th>
Â  Â  Â  Â  Â  Â  <td>{{ record.next_of_kin }}</td>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th>Move-in Date</th>
Â  Â  Â  Â  Â  Â  <td>{{ record.move_in_date }}</td>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th>Key Collected</th>
Â  Â  Â  Â  Â  Â  <td>{{ record.key_collection }}</td>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th>Move-out Date</th>
Â  Â  Â  Â  Â  Â  <td>{{ record.move_out_date }}</td>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th>Key Dropped</th>
Â  Â  Â  Â  Â  Â  <td>{{ record.key_drop_off }}</td>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th>Current Residence</th>
Â  Â  Â  Â  Â  Â  <td>{{ record.current_residence }}</td>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th>Occupancy</th>
Â  Â  Â  Â  Â  Â  <td>{{ record.occupancy_status }}</td>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  </tbody>
Â  Â  Â  </table>
Â  Â  Â  {% endif %}
Â  Â  </div>
Â  </div>

Â  <div class="card shadow rounded mb-4">
Â  Â  <div class="card-header">
Â  Â  Â  <ul class="nav nav-tabs card-header-tabs" id="imageTabs" role="tablist">
Â  Â  Â  Â  <li class="nav-item" role="presentation">
Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  class="nav-link active"
Â  Â  Â  Â  Â  Â  id="move-in-tab"
Â  Â  Â  Â  Â  Â  data-bs-toggle="tab"
Â  Â  Â  Â  Â  Â  data-bs-target="#move-in"
Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  role="tab"
Â  Â  Â  Â  Â  Â  aria-controls="move-in"
Â  Â  Â  Â  Â  Â  aria-selected="true"
Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  ğŸ“¸ Routine Inspection
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </li>
Â  Â  Â  Â  <li class="nav-item" role="presentation">
Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  class="nav-link"
Â  Â  Â  Â  Â  Â  id="move-out-tab"
Â  Â  Â  Â  Â  Â  data-bs-toggle="tab"
Â  Â  Â  Â  Â  Â  data-bs-target="#move-out"
Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  role="tab"
Â  Â  Â  Â  Â  Â  aria-controls="move-out"
Â  Â  Â  Â  Â  Â  aria-selected="false"
Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  ğŸ“¸ Check-out Photos
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </li>
Â  Â  Â  Â  <li class="nav-item" role="presentation">
Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  class="nav-link"
Â  Â  Â  Â  Â  Â  id="id-photo-tab"
Â  Â  Â  Â  Â  Â  data-bs-toggle="tab"
Â  Â  Â  Â  Â  Â  data-bs-target="#id-photo"
Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  role="tab"
Â  Â  Â  Â  Â  Â  aria-controls="id-photo"
Â  Â  Â  Â  Â  Â  aria-selected="false"
Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  ğŸ†” ID Documents
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </li>
Â  Â  Â  </ul>
Â  Â  </div>
Â  Â  <div class="card-body">
Â  Â  Â  <div class="tab-content" id="imageTabsContent">
Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  class="tab-pane fade show active"
Â  Â  Â  Â  Â  id="move-in"
Â  Â  Â  Â  Â  role="tabpanel"
Â  Â  Â  Â  Â  aria-labelledby="move-in-tab"
Â  Â  Â  Â  >
Â  Â  Â  Â  Â  {% if images|length == 0 %}
Â  Â  Â  Â  Â  <p class="text-muted">No move-in images available.</p>
Â  Â  Â  Â  Â  {% else %}
Â  Â  Â  Â  Â  <div class="row g-3">
Â  Â  Â  Â  Â  Â  {% for image in images %} {% if image.category == "move_in" %}
Â  Â  Â  Â  Â  Â  <div class="col-lg-3 col-md-4 col-sm-6 position-relative">
Â  Â  Â  Â  Â  Â  Â  <div class="card h-100 shadow-sm">
Â  Â  Â  Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  Â  Â  Â  src="{{ image.image.url }}"
Â  Â  Â  Â  Â  Â  Â  Â  Â  class="card-img-top rounded"
Â  Â  Â  Â  Â  Â  Â  Â  Â  alt="Move-in Photo"
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  {% if edit_mode %}
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-body p-2 text-end">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <form
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method="POST"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  action="{% url 'delete_image' image.id %}"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onsubmit="return confirm('Are you sure you want to delete this image?');"
Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {% csrf_token %}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="btn btn-sm btn-danger">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Delete
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  {% endif %}
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  {% endif %} {% empty %}
Â  Â  Â  Â  Â  Â  <p class="text-muted">No move-in images available.</p>
Â  Â  Â  Â  Â  Â  {% endfor %}
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  {% endif %}
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  class="tab-pane fade"
Â  Â  Â  Â  Â  id="move-out"
Â  Â  Â  Â  Â  role="tabpanel"
Â  Â  Â  Â  Â  aria-labelledby="move-out-tab"
Â  Â  Â  Â  >
Â  Â  Â  Â  Â  {% if images|length == 0 %}
Â  Â  Â  Â  Â  <p class="text-muted">No move-out images available.</p>
Â  Â  Â  Â  Â  {% else %}
Â  Â  Â  Â  Â  <div class="row g-3">
Â  Â  Â  Â  Â  Â  {% for image in images %} {% if image.category == "move_out" %}
Â  Â  Â  Â  Â  Â  <div class="col-lg-3 col-md-4 col-sm-6 position-relative">
Â  Â  Â  Â  Â  Â  Â  <div class="card h-100 shadow-sm">
Â  Â  Â  Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  Â  Â  Â  src="{{ image.image.url }}"
Â  Â  Â  Â  Â  Â  Â  Â  Â  class="card-img-top rounded"
Â  Â  Â  Â  Â  Â  Â  Â  Â  alt="Move-out Photo"
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  {% if edit_mode %}
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-body p-2 text-end">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <form
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method="POST"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  action="{% url 'delete_image' image.id %}"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onsubmit="return confirm('Are you sure you want to delete this image?');"
Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {% csrf_token %}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="btn btn-sm btn-danger">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Delete
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  {% endif %}
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  {% endif %} {% empty %}
Â  Â  Â  Â  Â  Â  <p class="text-muted">No move-out images available.</p>
Â  Â  Â  Â  Â  Â  {% endfor %}
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  {% endif %}
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  class="tab-pane fade"
Â  Â  Â  Â  Â  id="id-photo"
Â  Â  Â  Â  Â  role="tabpanel"
Â  Â  Â  Â  Â  aria-labelledby="id-photo-tab"
Â  Â  Â  Â  >
Â  Â  Â  Â  Â  {% if images|length == 0 %}
Â  Â  Â  Â  Â  <p class="text-muted">No ID documents available.</p>
Â  Â  Â  Â  Â  {% else %}
Â  Â  Â  Â  Â  <div class="row g-3">
Â  Â  Â  Â  Â  Â  {% for image in images %} {% if image.category == "id_photo" %}
Â  Â  Â  Â  Â  Â  <div class="col-lg-3 col-md-4 col-sm-6 position-relative">
Â  Â  Â  Â  Â  Â  Â  <div class="card h-100 shadow-sm">
Â  Â  Â  Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  Â  Â  Â  src="{{ image.image.url }}"
Â  Â  Â  Â  Â  Â  Â  Â  Â  class="card-img-top rounded"
Â  Â  Â  Â  Â  Â  Â  Â  Â  alt="ID Document"
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  {% if edit_mode %}
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-body p-2 text-end">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <form
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method="POST"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  action="{% url 'delete_image' image.id %}"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onsubmit="return confirm('Are you sure you want to delete this image?');"
Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {% csrf_token %}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="btn btn-sm btn-danger">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Delete
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  {% endif %}
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  {% endif %} {% empty %}
Â  Â  Â  Â  Â  Â  <p class="text-muted">No ID documents available.</p>
Â  Â  Â  Â  Â  Â  {% endfor %}
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  {% endif %}
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  {% if edit_mode %}
Â  Â  Â  <div class="mt-4 border-top pt-3">
Â  Â  Â  Â  <h5>Add New Image</h5>
Â  Â  Â  Â  <form
Â  Â  Â  Â  Â  method="POST"
Â  Â  Â  Â  Â  action="{% url 'record' record.pk %}"
Â  Â  Â  Â  Â  enctype="multipart/form-data"
Â  Â  Â  Â  Â  class="row g-3 align-items-center"
Â  Â  Â  Â  >
Â  Â  Â  Â  Â  {% csrf_token %}
Â  Â  Â  Â  Â  <input type="hidden" name="edit_mode" value="true" />
Â  Â  Â  Â  Â  <div class="col-md-6 col-lg-4">
Â  Â  Â  Â  Â  Â  {{ image_form.image.label_tag }} {{ image_form.image }} {{
Â  Â  Â  Â  Â  Â  image_form.image.errors }}
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="col-md-4 col-lg-3">
Â  Â  Â  Â  Â  Â  {{ image_form.category.label_tag }} {{ image_form.category }} {{
Â  Â  Â  Â  Â  Â  image_form.category.errors }}
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="col-md-2 col-lg-2 d-grid">
Â  Â  Â  Â  Â  Â  <button type="submit" name="upload_image" class="btn btn-primary">
Â  Â  Â  Â  Â  Â  Â  Upload
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </form>
Â  Â  Â  </div>
Â  Â  Â  {% endif %}
Â  Â  </div>
Â  </div>

Â  <div class="mb-5">
Â  Â  <a href="{% url 'home' %}" class="btn btn-secondary">â† Back to Home</a>
Â  </div>
</div>

<script>
Â  var triggerTabList = [].slice.call(
Â  Â  document.querySelectorAll("#imageTabs button")
Â  );
Â  triggerTabList.forEach(function (triggerEl) {
Â  Â  var tabTrigger = new bootstrap.Tab(triggerEl);

Â  Â  triggerEl.addEventListener("click", function (event) {
Â  Â  Â  event.preventDefault();
Â  Â  Â  tabTrigger.show();
Â  Â  });
Â  });
</script>

{% endblock %}
